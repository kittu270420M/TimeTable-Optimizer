<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Timetable Optimizer</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  </head>
  <body>
    <div class="app-container">
      <header class="app-header">
        <div class="header-content">
          <h1><i class="fas fa-calendar-alt"></i> Timetable Optimizer</h1>
          <p>Create your perfect green schedule without slot clashes</p>
        </div>
      </header>

      <main class="app-main">
        <section class="input-section card">
          <div id="course-selection">
            <h2><i class="fas fa-book-open"></i> Select Courses</h2>
            <div class="form-group">
              <select name="Courses" id="course-type" multiple size="6">
                <option value="CSE1005">
                  CSE1005 - Software Engineering (4 Credits)
                </option>
                <option value="CSE2007">
                  CSE2007 - Database Management Systems (4 Credits)
                </option>
                <option value="CSE3008">
                  CSE3008 - Introduction to Machine Learning (4 Credits)
                </option>
                <option value="CSE2011">
                  CSE2011 - Cyber Security and Digital Forensics (4 Credits)
                </option>
                <option value="MAT1011">
                  MAT1011 - Applied Statistics (4 credits)
                </option>
                <option value="ECE2002">
                  ECE2002 - Computer Architecture and Organization (4 Credit)
                </option>
                <option value="MGT1040">
                  MGT1040 - Entrepreneurship - Theory Only (2 Credits)
                </option>
                <option value="STS2009">
                  STS2009 - Arithmetic Problem Solving Skills (3 Credits)
                </option>
              </select>
              <small
                ><i class="fas fa-info-circle"></i> Hold Ctrl/Cmd to select
                multiple courses</small
              >
            </div>
            <button id="confirm-courses" class="primary-btn">
              <i class="fas fa-arrow-right"></i> Continue to Teachers
            </button>
          </div>
        </section>

        <section id="teacher-selection" class="hidden">
          <div class="section-header">
            <h2><i class="fas fa-chalkboard-teacher"></i> Select Teachers</h2>
            <div class="header-actions">
              <button id="back-to-courses" class="secondary-btn">
                <i class="fas fa-arrow-left"></i> Back to Courses
              </button>
              <div>
                <button id="save-selection" class="secondary-btn">
                  <i class="fas fa-save"></i> Save Selection
                </button>
                <button id="load-selection" class="secondary-btn">
                  <i class="fas fa-folder-open"></i> Load Selection
                </button>
              </div>
            </div>
          </div>

          <div id="teacher-options-container">
            <!-- Course sections with sorting controls will be dynamically inserted here -->
          </div>
          <div class="action-buttons">
            <button id="generate-timetable" class="primary-btn">
              <i class="fas fa-calendar-check"></i> Generate Timetable
            </button>
            <button id="reset-selection" class="secondary-btn">
              <i class="fas fa-redo"></i> Reset Selection
            </button>
          </div>
        </section>

        <section id="timetable-display" class="hidden">
          <div class="section-header">
            <h2><i class="fas fa-table"></i> Your Timetable</h2>
            <div class="header-actions">
              <div class="legend">
                <span class="theory-legend"
                  ><i class="fas fa-chalkboard"></i> Theory</span
                >
                <span class="lab-legend"><i class="fas fa-flask"></i> Lab</span>
                <span class="conflict-legend"
                  ><i class="fas fa-exclamation-triangle"></i> Conflict</span
                >
              </div>
              <div class="export-buttons">
                <button id="export-pdf" class="secondary-btn">
                  <i class="fas fa-file-pdf"></i> Export PDF
                </button>
                <button id="export-image" class="secondary-btn">
                  <i class="fas fa-image"></i> Export Image
                </button>
              </div>
            </div>
          </div>

          <!-- NEW: Selected Teachers Table -->
          <div
            id="selected-teachers-table"
            class="selected-teachers-table card"
          >
            <h3><i class="fas fa-users"></i> Selected Teachers</h3>
            <div class="table-container">
              <table class="teachers-table">
                <thead>
                  <tr>
                    <th>Course Code</th>
                    <th>Course Name</th>
                    <th>Theory Teacher</th>
                    <th>Theory Slots</th>
                    <th>Lab Teacher</th>
                    <th>Lab Slots</th>
                    <th>Credits</th>
                  </tr>
                </thead>
                <tbody id="selected-teachers-tbody">
                  <!-- Will be populated by JavaScript -->
                </tbody>
                <tfoot>
                  <tr>
                    <td
                      colspan="6"
                      style="text-align: right; font-weight: bold"
                    >
                      Total Credits:
                    </td>
                    <td id="total-credits-display" style="font-weight: bold">
                      0
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>

          <div class="timetable-container">
            <div class="timetable-grid" id="timetable-grid"></div>
          </div>
          <div id="conflict-warnings" class="conflict-warnings"></div>
          <small
            ><i class="fas fa-info-circle"></i> For simplicity, lab sessions
            have been assumed to end at 50 minutes instead of the standard +40
            minute duration.</small
          >
        </section>
      </main>

      <footer class="app-footer">
        <p>Made with <i class="fas fa-heart"></i> for students</p>
        <p class="version">Version 3.1.0</p>
      </footer>
    </div>

    <script src="script.js"></script>
  </body>
</html>