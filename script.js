const slotStructure = {
  TUE: {
    theorySlots: [
      ["TFF1"],
      ["A1"],
      ["B1"],
      ["TC1", "G1"],
      ["D1"],
      ["F2"],
      ["A2"],
      ["B2"],
      ["TC2", "G2"],
      ["TDD2"],
    ],
    theoryTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
    ],
    labSlots: [
      ["L1"],
      ["L2"],
      ["L3"],
      ["L4"],
      ["L5"],
      ["L6"],
      ["L31"],
      ["L32"],
      ["L33"],
      ["L34"],
      ["L35"],
      ["L36"],
    ],
    labTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "12.50 - 1.30",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
      "6.50 - 7.40",
    ],
  },
  WED: {
    theorySlots: [
      ["TGG1"],
      ["D1"],
      ["F1"],
      ["E1", "SC2"],
      ["B1"],
      ["D2"],
      ["TF2", "G2"],
      ["E2", "SC1"],
      ["B2"],
      ["TCC2"],
    ],
    theoryTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
    ],
    labSlots: [
      ["L7"],
      ["L8"],
      ["L9"],
      ["L10"],
      ["L11"],
      ["L12"],
      ["L37"],
      ["L38"],
      ["L39"],
      ["L40"],
      ["L41"],
      ["L42"],
    ],
    labTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "12.50 - 1.30",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
      "6.50 - 7.40",
    ],
  },
  THU: {
    theorySlots: [
      ["TEE1"],
      ["C1"],
      ["TD1", "TG1"],
      ["TAA1", "ECS"],
      ["TBB1", "CLUB"],
      ["TE2", "SE1"],
      ["C2"],
      ["A2"],
      ["TD2", "TG2"],
      ["TGG2"],
    ],
    theoryTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
    ],
    labSlots: [
      ["L13"],
      ["L14"],
      ["L15"],
      ["L16"],
      ["L17"],
      ["L18"],
      ["L43"],
      ["L44"],
      ["L45"],
      ["L46"],
      ["L47"],
      ["L48"],
    ],
    labTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "12.50 - 1.30",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
      "6.50 - 7.40",
    ],
  },
  FRI: {
    theorySlots: [
      ["TCC1"],
      ["TB1"],
      ["TA1"],
      ["F1"],
      ["TE1", "SD2"],
      ["C2"],
      ["TB2"],
      ["TA2"],
      ["F2"],
      ["TEE2"],
    ],
    theoryTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
    ],
    labSlots: [
      ["L19"],
      ["L20"],
      ["L21"],
      ["L22"],
      ["L23"],
      ["L24"],
      ["L49"],
      ["L50"],
      ["L51"],
      ["L52"],
      ["L53"],
      ["L54"],
    ],
    labTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "12.50 - 1.30",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
      "6.50 - 7.40",
    ],
  },
  SAT: {
    theorySlots: [
      ["TDD1"],
      ["E1", "SE2"],
      ["C1"],
      ["TF1", "G1"],
      ["A1"],
      ["D2"],
      ["E2", "SD1"],
      ["TAA2", "ECS"],
      ["TBB2", "CLUB"],
      ["TFF2"],
    ],
    theoryTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
    ],
    labSlots: [
      ["L25"],
      ["L26"],
      ["L27"],
      ["L28"],
      ["L29"],
      ["L30"],
      ["L55"],
      ["L56"],
      ["L57"],
      ["L58"],
      ["L59"],
      ["L60"],
    ],
    labTimes: [
      "8.00 - 8.50",
      "9.00 - 9.50",
      "10.00 - 10.50",
      "11.00 - 11.50",
      "12.00 - 12.50",
      "12.50 - 1.30",
      "2.00 - 2.50",
      "3.00 - 3.50",
      "4.00 - 4.50",
      "5.00 - 5.50",
      "6.00 - 6.50",
      "6.50 - 7.40",
    ],
  },
};

// // Time slots
// const theoryTimes = [
//   "8:50", // TFF1
//   "9:50", // A1
//   "10:50", // B1
//   "11:50", // TC1
//   "11:50", // G1
//   "12:50", // D1
//   "", // break
//   "14:50", // F2
//   "15:50", // A2
//   "16:50", // B2
//   "17:50", // TC2
//   "17:50", // G2
//   "18:50", // TDD2
//   "", // break
// ];

// const labTimes = [
//   "8:50",
//   "9:50",
//   "10:50",
//   "11:50",
//   "12:50",
//   "13:30",
//   "14:50",
//   "15:50",
//   "16:50",
//   "17:50",
//   "18:50",
//   "19:30",
// ];
const unifiedTimes = [
  { time: "8.00 - 8.50", labOnly: false },
  { time: "9.00 - 9.50", labOnly: false },
  { time: "10.00 - 10.50", labOnly: false },
  { time: "11.00 - 11.50", labOnly: false },
  { time: "12.00 - 12.50", labOnly: false },
  { time: "12.50 - 1.30", labOnly: true }, // ðŸ”’ Lab-only slot
  { time: "2.00 - 2.50", labOnly: false },
  { time: "3.00 - 3.50", labOnly: false },
  { time: "4.00 - 4.50", labOnly: false },
  { time: "5.00 - 5.50", labOnly: false },
  { time: "6.00 - 6.50", labOnly: false },
  { time: "6.50 - 7.30", labOnly: true }, // Optional: lab-only
];

// Sample data with more realistic slots
const courseData = {
  CSE1005: {
    name: "Software Engineering",
    credits: 4,
    theoryTeachers: [
      { name: "Anurag De", slots: ["B1", "TB1"], rating: 2.96 },
      { name: "Tauseef Khan", slots: ["B1", "TB1"], rating: 4.37 },
      { name: "Naga Jagadesh Bommagani", slots: ["B1", "TB1"], rating: 4.62 },
      { name: "Dasari Sandeep", slots: ["B1", "TB1"], rating: "-" },
      { name: "JYOTHSNA.K", slots: ["B1", "TB1"], rating: "-" },
      { name: "KARNA KRISHNAVENI", slots: ["B1", "TB1"], rating: "-" },
      { name: "NAGAEESWARI BODAPATI", slots: ["B1", "TB1"], rating: "-" },
      { name: "Pechetti Mounika", slots: ["B1", "TB1"], rating: "-" },
      { name: "SAMBASIVA RAO GUMMA", slots: ["B1", "TB1"], rating: "-" },
      { name: "Saroja Kumar Rout", slots: ["B1", "TB1"], rating: "-" },
      { name: "SHARMILA SHAIK", slots: ["B1", "TB1"], rating: "-" },

      { name: "M JAGADEESH", slots: ["B2", "TB2"], rating: 3.32 },
      { name: "Nagendra Panini Challa", slots: ["B2", "TB2"], rating: 4.52 },
      { name: "JYOTHSNA.K", slots: ["B2", "TB2"], rating: "-" },
      { name: "MOHAMMAD SIRAJUDDIN", slots: ["B2", "TB2"], rating: "-" },
      { name: "NAGAEESWARI BODAPATI", slots: ["B2", "TB2"], rating: "-" },
      { name: "Pechetti Mounika", slots: ["B2", "TB2"], rating: "-" },
      { name: "R PRASANNA KUMARI", slots: ["B2", "TB2"], rating: "-" },
      { name: "SAMBASIVA RAO GUMMA", slots: ["B2", "TB2"], rating: "-" },
      { name: "SHARMILA SHAIK", slots: ["B2", "TB2"], rating: "-" },
      { name: "Varunkumar Anantharaman", slots: ["B2", "TB2"], rating: "-" },
      { name: "Yelepi Usha Rani", slots: ["B2", "TB2"], rating: "-" },

      { name: "Selva Kumar S", slots: ["C1", "TC1"], rating: 3.35 },
      { name: "Bileesh P Babu", slots: ["C1", "TC1"], rating: "-" },
      { name: "DHULIPALLA NAGAJYOTHI", slots: ["C1", "TC1"], rating: "-" },
      { name: "Koduru Hajarathaiah", slots: ["C1", "TC1"], rating: "-" },
      { name: "LAKSHMI PRASANNA MEDA", slots: ["C1", "TC1"], rating: "-" },
      { name: "POTHINA POORNACHANDU", slots: ["C1", "TC1"], rating: "-" },
      { name: "S V KISHORE BABU", slots: ["C1", "TC1"], rating: "-" },

      { name: "Annapureddy V N Reddy", slots: ["C1", "TCC1"], rating: "-" },
      {
        name: "Battula Venkata Satish Babu",
        slots: ["C1", "TCC1"],
        rating: "-",
      },
      { name: "NADENLLA RAJAMOHANREDDY", slots: ["C1", "TCC1"], rating: "-" },

      { name: "Selva Kumar S", slots: ["C2", "TC2"], rating: 3.35 },
      { name: "Balusa Bhanu Chander", slots: ["C2", "TC2"], rating: "-" },
      { name: "DHULIPALLA NAGAJYOTHI", slots: ["C2", "TC2"], rating: "-" },
      { name: "G.Muneeswari", slots: ["C2", "TC2"], rating: "-" },
      { name: "KARNA KRISHNAVENI", slots: ["C2", "TC2"], rating: "-" },
      { name: "LAKSHMI PRASANNA MEDA", slots: ["C2", "TC2"], rating: "-" },
      { name: "POTHINA POORNACHANDU", slots: ["C2", "TC2"], rating: "-" },

      {
        name: "Battula Venkata Satish Babu",
        slots: ["C2", "TCC2"],
        rating: "-",
      },
      {
        name: "Prof.SCOPE Dig Crs Faculty-11",
        slots: ["C2", "TCC2"],
        rating: "-",
      },
      { name: "S V KISHORE BABU", slots: ["C2", "TCC2"], rating: "-" },
    ],
    labTeachers: [
      {
        name: "Soubhagya Sankar Barpanda",
        slots: ["L10", "L11"],
        rating: 3.13,
      },
      { name: "Gokul Yenduri", slots: ["L10", "L11"], rating: "-" },

      { name: "Saroja Kumar Rout", slots: ["L14", "L15"], rating: "-" },
      { name: "Allapati Rajya Lakshmi", slots: ["L14", "L15"], rating: "-" },

      { name: "B.V.Gokulnath", slots: ["L2", "L3"], rating: "-" },
      { name: "G.HARANADHA BABU", slots: ["L2", "L3"], rating: "-" },

      { name: "LAKSHMI PRASANNA MEDA", slots: ["L20", "L21"], rating: "-" },
      { name: "DHULIPALLA NAGAJYOTHI", slots: ["L20", "L21"], rating: "-" },

      { name: "B.V.Gokulnath", slots: ["L22", "L23"], rating: "-" },
      { name: "Pechetti Mounika", slots: ["L22", "L23"], rating: "-" },

      { name: "Hussain Syed", slots: ["L26", "L27"], rating: "-" },
      { name: "Arindam Dey", slots: ["L26", "L27"], rating: "-" },

      { name: "JAINABBI BANDA", slots: ["L28", "L29"], rating: "-" },
      { name: "SHAIK SHAHANAZ", slots: ["L28", "L29"], rating: "-" },

      { name: "SHARMILA SHAIK", slots: ["L31", "L32"], rating: "-" },
      { name: "S V KISHORE BABU", slots: ["L31", "L32"], rating: "-" },

      { name: "Khasim Syed", slots: ["L33", "L34"], rating: 3.03 },
      { name: "JAINABBI BANDA", slots: ["L33", "L34"], rating: "-" },

      { name: "SAMBASIVA RAO GUMMA", slots: ["L35", "L36"], rating: "-" },
      {
        name: "MUNIPALLI UMA MAHESWARA RAO",
        slots: ["L35", "L36"],
        rating: "-",
      },
      { name: "M JAGADEESH", slots: ["L35", "L36"], rating: "-" },

      { name: "Gokul Yenduri", slots: ["L37", "L38"], rating: "-" },
      { name: "Allapati Rajya Lakshmi", slots: ["L37", "L38"], rating: "-" },

      { name: "YAMINI KODALI", slots: ["L39", "L40"], rating: "-" },
      { name: "Naga Jagadesh Bommagani", slots: ["L39", "L40"], rating: "-" },

      { name: "Khasim Syed", slots: ["L4", "L5"], rating: "-" },
      { name: "SHAIK SHAHANAZ", slots: ["L4", "L5"], rating: "-" },

      { name: "BHABANI SANKAR SAMANTRAY", slots: ["L41", "L42"], rating: "-" },
      { name: "G.HARANADHA BABU", slots: ["L41", "L42"], rating: "-" },

      { name: "Pechetti Mounika", slots: ["L43", "L44"], rating: "-" },
      { name: "ODNALA SRINIVAS", slots: ["L43", "L44"], rating: "-" },

      { name: "Koduru Hajarathaiah", slots: ["L45", "L46"], rating: "-" },
      { name: "Soubhagya Sankar Barpanda", slots: ["L45", "L46"], rating: "-" },

      { name: "POTHINA POORNACHANDU", slots: ["L47", "L48"], rating: "-" },
      { name: "BHABANI SANKAR SAMANTRAY", slots: ["L47", "L48"], rating: "-" },

      { name: "Arindam Dey", slots: ["L49", "L50"], rating: "-" },
      { name: "YAMINI KODALI", slots: ["L49", "L50"], rating: "-" },

      { name: "Hussain Syed", slots: ["L51", "L52"], rating: "-" },
      {
        name: "MUNIPALLI UMA MAHESWARA RAO",
        slots: ["L51", "L52"],
        rating: "-",
      },

      { name: "M JAGADEESH", slots: ["L53", "L54"], rating: "-" },
      {
        name: "Prof.SCOPE Dig Crs Faculty-1",
        slots: ["L53", "L54"],
        rating: "-",
      },
      { name: "PREM SWARUP MALLIPUDI", slots: ["L53", "L54"], rating: "-" },

      {
        name: "Battula Venkata Satish Babu",
        slots: ["L55", "L56"],
        rating: "-",
      },
      { name: "ODNALA SRINIVAS", slots: ["L55", "L56"], rating: "-" },

      { name: "PREM SWARUP MALLIPUDI", slots: ["L8", "L9"], rating: "-" },
      { name: "ANANTHA HARITHA", slots: ["L8", "L9"], rating: "-" },
    ],
  },
  CSE2007: {
    name: "Database Management Systems",
    credits: 4,
    theoryTeachers: [
      { name: "Beebi Naseeba", slots: ["C1", "TC1"], rating: 4.1 },
      { name: "P. Kuppusamy", slots: ["C1", "TC1"], rating: 3.2 },
      { name: "Paidipogu Sowjanya", slots: ["C1", "TC1"], rating: "-" },
      { name: "PATAN MUSHIYA KATOON", slots: ["C1", "TC1"], rating: "-" },
      { name: "RAJASEKAR RAMASAMY", slots: ["C1", "TC1"], rating: "-" },
      { name: "Srinivasarao.Pokuri", slots: ["C1", "TC1"], rating: "-" },
      { name: "Yallanti Sowjanya Kumari", slots: ["C1", "TC1"], rating: "-" },
      { name: "Yarlagadda Siva Reshma", slots: ["C1", "TC1"], rating: "-" },

      { name: "Burla Nagaraju", slots: ["C1", "TCC1"], rating: "-" },
      { name: "Ravi Kumar Poluru", slots: ["C1", "TCC1"], rating: "-" },
      { name: "Voddelli SriLakshmi", slots: ["C1", "TCC1"], rating: "-" },

      { name: "Beebi Naseeba", slots: ["C2", "TC2"], rating: 4.1 },
      { name: "BUDIDA SATISH KUMAR", slots: ["C2", "TC2"], rating: "-" },
      { name: "P. Kuppusamy", slots: ["C2", "TC2"], rating: 3.2 },
      { name: "Paidipogu Sowjanya", slots: ["C2", "TC2"], rating: "-" },
      { name: "PATAN MUSHIYA KATOON", slots: ["C2", "TC2"], rating: "-" },
      { name: "Rajasekhar Boddu", slots: ["C2", "TC2"], rating: "-" },
      { name: "Yallanti Sowjanya Kumari", slots: ["C2", "TC2"], rating: "-" },
      { name: "Yarlagadda Siva Reshma", slots: ["C2", "TC2"], rating: "-" },

      { name: "Burla Nagaraju", slots: ["C2", "TCC2"], rating: "-" },
      { name: "D. Paul Joseph", slots: ["C2", "TCC2"], rating: "-" },
      { name: "Ravi Kumar Poluru", slots: ["C2", "TCC2"], rating: "-" },

      { name: "Asish Kumar Dalai", slots: ["D1", "TD1"], rating: 3.5 },
      { name: "Devulapalli Sudheer", slots: ["D1", "TD1"], rating: "-" },
      { name: "G.Muneeswari", slots: ["D1", "TD1"], rating: 4.6 },
      { name: "Monalisa Sahu", slots: ["D1", "TD1"], rating: "-" },
      { name: "N Lakshmipathi Anantha", slots: ["D1", "TD1"], rating: "-" },
      {
        name: "Siddique Ibrahim Peer Mohamed",
        slots: ["D1", "TD1"],
        rating: 4.4,
      },
      { name: "Somya Ranjan Sahoo", slots: ["D1", "TD1"], rating: 3.4 },

      { name: "Madugula Kiran Kumar", slots: ["D1", "TDD1"], rating: "-" },
      { name: "SHAIK KHASIM BASHA", slots: ["D1", "TDD1"], rating: "-" },
      {
        name: "Siddique Ibrahim Peer Mohamed",
        slots: ["D1", "TDD1"],
        rating: 3.9,
      },

      { name: "Kailash Chandra Mishra", slots: ["D2", "TD2"], rating: "-" },
      { name: "N Lakshmipathi Anantha", slots: ["D2", "TD2"], rating: "-" },
      { name: "Nagaraju Devarakonda", slots: ["D2", "TD2"], rating: 4.0 },
      { name: "Samuka Mohanty", slots: ["D2", "TD2"], rating: "-" },
      {
        name: "Siddique Ibrahim Peer Mohamed",
        slots: ["D2", "TD2"],
        rating: 4.4,
      },
      { name: "Somya Ranjan Sahoo", slots: ["D2", "TD2"], rating: 3.4 },
      { name: "TANUKONDA PADMAJA", slots: ["D2", "TD2"], rating: "-" },

      { name: "Madugula Kiran Kumar", slots: ["D2", "TDD2"], rating: "-" },
      { name: "RAJASEKAR RAMASAMY", slots: ["D2", "TDD2"], rating: "-" },
      { name: "SHAIK KHASIM BASHA", slots: ["D2", "TDD2"], rating: "-" },
    ],
    labTeachers: [
      { name: "Rajesh Duvvuru", slots: ["L10", "L11"], rating: 4.32 },
      { name: "PATAN MUSHIYA KATOON", slots: ["L10", "L11"], rating: "-" },

      { name: "Lalitha Kumari P", slots: ["L14", "L15"], rating: 4.27 },
      { name: "BUDIDA SATISH KUMAR", slots: ["L14", "L15"], rating: "-" },

      { name: "Afzal Hussain Shahid", slots: ["L2", "L3"], rating: 3.29 },
      { name: "Yarlagadda Siva Reshma", slots: ["L2", "L3"], rating: "-" },

      { name: "Madugula Kiran Kumar", slots: ["L20", "L21"], rating: "-" },
      { name: "RAJASEKAR RAMASAMY", slots: ["L20", "L21"], rating: "-" },

      { name: "Manomita Chakraborty", slots: ["L22", "L23"], rating: 2.23 },
      { name: "Sandipan Maiti", slots: ["L22", "L23"], rating: 3.42 },

      { name: "SHAIK RESHMA", slots: ["L26", "L27"], rating: "-" },
      { name: "SHAIK KHASIM BASHA", slots: ["L26", "L27"], rating: "-" },

      { name: "Ravi Sankar Barpanda", slots: ["L28", "L29"], rating: 4.86 },
      { name: "Deepasikha Mishra", slots: ["L28", "L29"], rating: 2.96 },

      { name: "Yallanti Sowjanya Kumari", slots: ["L31", "L32"], rating: "-" },
      {
        name: "Mukkoti Maruthi Venkata Chalapathi",
        slots: ["L31", "L32"],
        rating: 4.11,
      },

      { name: "Burla Nagaraju", slots: ["L33", "L34"], rating: "-" },
      { name: "S. Kalyani", slots: ["L33", "L34"], rating: "-" },

      { name: "Hemant Kumar Reddy", slots: ["L35", "L36"], rating: 2.89 },
      { name: "BUDIDA SATISH KUMAR", slots: ["L35", "L36"], rating: "-" },

      { name: "Sandipan Maiti", slots: ["L37", "L38"], rating: 3.42 },
      { name: "Ravi Sankar Barpanda", slots: ["L37", "L38"], rating: 4.86 },

      { name: "Visalakshi Annepu", slots: ["L39", "L40"], rating: 3.74 },
      { name: "Rajesh Duvvuru", slots: ["L39", "L40"], rating: 4.32 },
      { name: "Yarlagadda Siva Reshma", slots: ["L39", "L40"], rating: "-" },

      { name: "Burla Nagaraju", slots: ["L4", "L5"], rating: "-" },
      { name: "SHAIK RESHMA", slots: ["L4", "L5"], rating: "-" },

      { name: "Madugula Kiran Kumar", slots: ["L41", "L42"], rating: "-" },
      { name: "Aravapalli Rama Satish", slots: ["L41", "L42"], rating: 2.31 },

      { name: "Manomita Chakraborty", slots: ["L43", "L44"], rating: 2.23 },
      { name: "Lalitha Kumari P", slots: ["L43", "L44"], rating: 4.27 },

      { name: "Deepasikha Mishra", slots: ["L45", "L46"], rating: 2.96 },
      { name: "JANGAM PAVANI PRAVALLIKA", slots: ["L45", "L46"], rating: "-" },

      {
        name: "Mukkoti Maruthi Venkata Chalapathi",
        slots: ["L47", "L48"],
        rating: 4.11,
      },
      {
        name: "Prof.SCOPE Dig Crs Faculty-1",
        slots: ["L47", "L48"],
        rating: "-",
      },

      { name: "Aravapalli Rama Satish", slots: ["L49", "L50"], rating: 2.31 },
      { name: "Hemant Kumar Reddy", slots: ["L49", "L50"], rating: 2.89 },

      { name: "Srinivasarao.Pokuri", slots: ["L51", "L52"], rating: "-" },
      { name: "Afzal Hussain Shahid", slots: ["L51", "L52"], rating: 3.29 },

      { name: "MAHABOOBSUBHANI SHAIK CH", slots: ["L53", "L54"], rating: "-" },
      {
        name: "Prof.SCOPE Dig Crs Faculty-2",
        slots: ["L53", "L54"],
        rating: "-",
      },

      {
        name: "Prof.SCOPE Dig Crs Faculty-2",
        slots: ["L55", "L56"],
        rating: "-",
      },
      { name: "Paidipogu Sowjanya", slots: ["L55", "L56"], rating: "-" },

      { name: "Visalakshi Annepu", slots: ["L8", "L9"], rating: 3.74 },
      { name: "S. Kalyani", slots: ["L8", "L9"], rating: "-" },
    ],
  },
  CSE3008: {
    name: "Introduction to Machine Learning",
    credits: 4,
    theoryTeachers: [
      { name: "Renita R", slots: ["E1", "TE1"], rating: "-" },
      { name: "Yallanti Sowjanya Kumari", slots: ["E1", "TE1"], rating: "-" },
      { name: "Bileesh P Babu", slots: ["E1", "TE1"], rating: "-" },
      { name: "T Rama Thulasi", slots: ["E1", "TE1"], rating: "-" },
      { name: "NAGA MALLESWARARAO P", slots: ["E1", "TE1"], rating: "-" },
      { name: "ANANTHA HARITHA", slots: ["E1", "TE1"], rating: "-" },
      { name: "Pujari Jeevana Jyothi", slots: ["E1", "TE1"], rating: "-" },
      { name: "P. Kuppusamy", slots: ["E1", "TEE1"], rating: "-" },

      { name: "NAGA MALLESWARARAO P", slots: ["E2", "TE2"], rating: "-" },
      { name: "Renita R", slots: ["E2", "TE2"], rating: "-" },
      { name: "ANANTHA HARITHA", slots: ["E2", "TE2"], rating: "-" },
      { name: "Pujari Jeevana Jyothi", slots: ["E2", "TE2"], rating: "-" },
      { name: "Selva Kumar S", slots: ["E2", "TE2"], rating: "-" },
      { name: "Gayathri Dhara", slots: ["E2", "TE2"], rating: "-" },
      { name: "Bileesh P Babu", slots: ["E2", "TE2"], rating: "-" },
      { name: "Karrothu Aravind", slots: ["E2", "TE2"], rating: "-" },

      { name: "Srinivasa Reddy Konda", slots: ["F1", "TF1"], rating: "-" },
      { name: "Prashanth Rajam", slots: ["F1", "TF1"], rating: "-" },
      { name: "Saroja Kumar Rout", slots: ["F1", "TF1"], rating: "-" },
      { name: "SHAIK SUFIA", slots: ["F1", "TF1"], rating: "-" },
      { name: "Shalini Subramani", slots: ["F1", "TF1"], rating: "-" },
      { name: "Jayanta Pratihar", slots: ["F1", "TFF1"], rating: "-" },
      { name: "P.ADI LAKSHMI", slots: ["F1", "TFF1"], rating: "-" },
      { name: "YOHOSHIVA BASARABOYINA", slots: ["F1", "TFF1"], rating: "-" },

      { name: "GUNDIMEDA VENUGOPAL", slots: ["F2", "TF2"], rating: "-" },
      { name: "Prashanth Rajam", slots: ["F2", "TF2"], rating: "-" },
      { name: "SHAIK SUFIA", slots: ["F2", "TF2"], rating: "-" },
      {
        name: "Siddique Ibrahim Peer Mohamed",
        slots: ["F2", "TF2"],
        rating: "-",
      },
      { name: "Saroja Kumar Rout", slots: ["F2", "TFF2"], rating: "-" },
      { name: "Karrothu Aravind", slots: ["F2", "TFF2"], rating: "-" },
      { name: "YOHOSHIVA BASARABOYINA", slots: ["F2", "TFF2"], rating: "-" },
    ],
    labTeachers: [
      { name: "Sanal Kumar T S", slots: ["L10", "L11"], rating: "-" },
      { name: "Sanal Kumar T S", slots: ["L14", "L15"], rating: "-" },
      { name: "Pujari Jeevana Jyothi", slots: ["L14", "L15"], rating: "-" },

      { name: "Bileesh P Babu", slots: ["L2", "L3"], rating: "-" },
      { name: "Suresh Dara", slots: ["L2", "L3"], rating: "-" },

      { name: "Mohan Allam", slots: ["L20", "L21"], rating: "-" },
      { name: "Selva Kumar S", slots: ["L20", "L21"], rating: "-" },

      { name: "Monali Bordoloi", slots: ["L22", "L23"], rating: "-" },

      {
        name: "Siddique Ibrahim Peer Mohamed",
        slots: ["L26", "L27"],
        rating: "-",
      },

      { name: "P. Kuppusamy", slots: ["L28", "L29"], rating: "-" },

      { name: "T Rama Thulasi", slots: ["L31", "L32"], rating: "-" },

      { name: "Srinivasa Reddy Konda", slots: ["L33", "L34"], rating: "-" },
      { name: "Suma Kamalesh Gandhimathi", slots: ["L33", "L34"], rating: "-" },

      {
        name: "Chintakindi Balaram Murthy",
        slots: ["L35", "L36"],
        rating: "-",
      },
      { name: "NAGA MALLESWARARAO P", slots: ["L35", "L36"], rating: "-" },

      { name: "Yamarthi Narasimha Rao", slots: ["L37", "L38"], rating: "-" },

      { name: "Monali Bordoloi", slots: ["L39", "L40"], rating: "-" },

      { name: "Bommareddy Lokesh", slots: ["L4", "L5"], rating: "-" },
      { name: "Shaik Subhani", slots: ["L4", "L5"], rating: "-" },

      {
        name: "Prof.SCOPE Dig Crs Faculty-2",
        slots: ["L41", "L42"],
        rating: "-",
      },
      { name: "Mohan Allam", slots: ["L41", "L42"], rating: "-" },

      { name: "Prashanth Rajam", slots: ["L43", "L44"], rating: "-" },

      { name: "Suresh Dara", slots: ["L45", "L46"], rating: "-" },
      { name: "Radha Mohan Pattanayak", slots: ["L45", "L46"], rating: "-" },
      { name: "Suma Kamalesh Gandhimathi", slots: ["L45", "L46"], rating: "-" },

      {
        name: "Prof.SCOPE Dig Crs Faculty-2",
        slots: ["L47", "L48"],
        rating: "-",
      },

      {
        name: "Chintakindi Balaram Murthy",
        slots: ["L49", "L50"],
        rating: "-",
      },
      { name: "Yamarthi Narasimha Rao", slots: ["L49", "L50"], rating: "-" },

      { name: "Bommareddy Lokesh", slots: ["L51", "L52"], rating: "-" },

      {
        name: "Prof.SCOPE Dig Crs Faculty-3",
        slots: ["L53", "L54"],
        rating: "-",
      },

      { name: "Radha Mohan Pattanayak", slots: ["L55", "L56"], rating: "-" },

      { name: "Shaik Subhani", slots: ["L8", "L9"], rating: "-" },
    ],
  },
  CSE2011: {
    name: "Cyber Security and Digital Forensics",
    credits: 4,
    theoryTeachers: [
      { name: "D. Santhadevi", slots: ["F1", "TF1"], rating: 0 },
      { name: "Ramkumar D", slots: ["F1", "TF1"], rating: 3.49 },

      { name: "D. Santhadevi", slots: ["F2", "TF2"], rating: 0 },
      { name: "Anil Vithalrao Turukmane", slots: ["F2", "TF2"], rating: 3.55 },
    ],
    labTeachers: [
      { name: "D. Santhadevi", slots: ["L14", "L15"], rating: 0 },
      { name: "D. Santhadevi", slots: ["L33", "L34"], rating: 0 },
      { name: "KILLI DURGA BHAVANI", slots: ["L4", "L5"], rating: 0 },
      { name: "KILLI DURGA BHAVANI", slots: ["L43", "L44"], rating: 0 },
      { name: "D. Santhadevi", slots: ["L47", "L48"], rating: 0 },
    ],
  },
  MAT1011: {
    name: "Applied Statistics",
    credits: 4,
    theoryTeachers: [
      { name: "Komandla Mahipal Reddy", slots: ["D1", "TD1"], rating: 3.72 },
      { name: "N Rajashekar", slots: ["D1", "TD1"], rating: "-" },
      { name: "Chandan Kumar Thakur", slots: ["D1", "TD1"], rating: 2.36 },
      { name: "Komandla Mahipal Reddy", slots: ["D1", "TD1"], rating: 3.72 },
      { name: "Manisha Maity", slots: ["D1", "TD1"], rating: 3.86 },
      { name: "Manisha Maity", slots: ["D1", "TD1"], rating: 3.86 },
      { name: "Peeyush Singh", slots: ["D1", "TD1"], rating: 4.27 },
      { name: "Prashanth Maroju", slots: ["D1", "TD1"], rating: 2.65 },
      { name: "R Sinuvasan", slots: ["D1", "TD1"], rating: 4.55 },
      { name: "Ramesh Prasad Panda", slots: ["D1", "TD1"], rating: 2.9 },
      { name: "Santanu Mandal", slots: ["D1", "TD1"], rating: 4.09 },
      { name: "Venkatrajam Marka", slots: ["D1", "TD1"], rating: 2.68 },
      { name: "Pradip R. Patle", slots: ["D1", "TD1"], rating: 2.2 },

      { name: "Perumandla Karunakar", slots: ["D1", "TDD1"], rating: "-" },
      { name: "S V Gomathi", slots: ["D1", "TDD1"], rating: "-" },

      { name: "Prashanth Maroju", slots: ["D2", "TD2"], rating: 2.64 },
      { name: "Pratik Premadarshi Ray", slots: ["D2", "TD2"], rating: 3.38 },
      { name: "Yada Nandukumar", slots: ["D2", "TD2"], rating: 4.27 },
      { name: "RAMA KRISHNA RONGALI", slots: ["D2", "TD2"], rating: "-" },
      { name: "S V Gomathi", slots: ["D2", "TD2"], rating: "-" },
      { name: "V. Raja", slots: ["D2", "TD2"], rating: "-" },

      { name: "ABHILASH CHAND", slots: ["D2", "TDD2"], rating: "-" },
      { name: "Arun Kumar Yadav", slots: ["D2", "TDD2"], rating: 1.97 },
      { name: "Gokulnath M", slots: ["D2", "TDD2"], rating: 2.68 },

      { name: "N Rajashekar", slots: ["E1", "TE1"], rating: "-" },
      { name: "Arun Kumar Yadav", slots: ["E1", "TE1"], rating: 1.97 },
      { name: "Francis P", slots: ["E1", "TE1"], rating: 4.09 },
      { name: "Nimai Sarkar", slots: ["E1", "TE1"], rating: 3.9 },
      { name: "Pratik Premadarshi Ray", slots: ["E1", "TE1"], rating: 3.37 },
      { name: "Santanu Nandi", slots: ["E1", "TE1"], rating: 2.0 },
      { name: "Shobhit Kumar Srivastava", slots: ["E1", "TE1"], rating: 1.74 },
      { name: "Soumen Kundu", slots: ["E1", "TE1"], rating: 4.86 },
      { name: "Shalini", slots: ["E1", "TE1"], rating: "-" },
      { name: "Sudhakar M", slots: ["E1", "TE1"], rating: "-" },
      { name: "V. Raja", slots: ["E1", "TE1"], rating: "-" },

      { name: "Ramesh Prasad Panda", slots: ["E1", "TEE1"], rating: 2.9 },

      { name: "Perumandla Karunakar", slots: ["E2", "TE2"], rating: "-" },
      { name: "Chandan Kumar Thakur", slots: ["E2", "TE2"], rating: 2.36 },
      { name: "Francis P", slots: ["E2", "TE2"], rating: 4.09 },
      { name: "Nimai Sarkar", slots: ["E2", "TE2"], rating: 3.9 },
      { name: "Peeyush Singh", slots: ["E2", "TE2"], rating: 4.27 },
      { name: "Piu Kundu", slots: ["E2", "TE2"], rating: 4.07 },
      { name: "Pradip R. Patle", slots: ["E2", "TE2"], rating: 2.2 },
      { name: "Santanu Mandal", slots: ["E2", "TE2"], rating: 4.09 },
      { name: "Santanu Nandi", slots: ["E2", "TE2"], rating: 2.0 },
      { name: "Sudhakar M", slots: ["E2", "TE2"], rating: "-" },
      { name: "Shobhit Kumar Srivastava", slots: ["E2", "TE2"], rating: 1.74 },
      { name: "Soumen Kundu", slots: ["E2", "TE2"], rating: 4.86 },
    ],
    labTeachers: [
      { name: "ABHILASH CHAND", slots: ["L10", "L11"], rating: "-" },
      { name: "Perumandla Karunakar", slots: ["L10", "L11"], rating: "-" },
      { name: "S V Gomathi", slots: ["L14", "L15"], rating: "-" },
      { name: "Sudhakar M", slots: ["L14", "L15"], rating: "-" },
      { name: "Peeyush Singh", slots: ["L2", "L3"], rating: 4.27 },
      { name: "Shobhit Kumar Srivastava", slots: ["L2", "L3"], rating: 1.74 },
      { name: "Pratik Premadarshi Ray", slots: ["L2", "L3"], rating: 3.38 },
      { name: "Komandla Mahipal Reddy", slots: ["L20", "L21"], rating: 3.72 },
      { name: "RAMA KRISHNA RONGALI", slots: ["L20", "L21"], rating: "-" },
      { name: "V. Pujitha", slots: ["L20", "L21"], rating: 3.49 },
      { name: "Perumandla Karunakar", slots: ["L22", "L23"], rating: "-" },
      { name: "ABHILASH CHAND", slots: ["L22", "L23"], rating: "-" },
      { name: "Yada Nandukumar", slots: ["L26", "L27"], rating: 4.27 },
      { name: "Santanu Mandal", slots: ["L26", "L27"], rating: 4.09 },
      { name: "Prashanth Maroju", slots: ["L28", "L29"], rating: 2.64 },
      { name: "Chandan Kumar Thakur", slots: ["L28", "L29"], rating: 2.36 },
      { name: "Soumen Kundu", slots: ["L28", "L29"], rating: 4.86 },
      { name: "Santanu Mandal", slots: ["L31", "L32"], rating: 4.09 },
      { name: "N Rajashekar", slots: ["L31", "L32"], rating: "-" },
      { name: "Nimai Sarkar", slots: ["L31", "L32"], rating: "-" },
      { name: "Gokulnath M", slots: ["L33", "L34"], rating: 2.68 },
      { name: "Pradip R. Patle", slots: ["L33", "L34"], rating: 2.2 },
      { name: "Soumen Kundu", slots: ["L33", "L34"], rating: 4.86 },
      { name: "Santanu Nandi", slots: ["L35", "L36"], rating: 2.0 },
      { name: "Piu Kundu", slots: ["L35", "L36"], rating: "-" },
      { name: "Ramesh Prasad Panda", slots: ["L37", "L38"], rating: 2.9 },
      { name: "Nadiminti Nagamani", slots: ["L37", "L38"], rating: 3.39 },
      { name: "Komandla Mahipal Reddy", slots: ["L39", "L40"], rating: 3.72 },
      { name: "R Sinuvasan", slots: ["L39", "L40"], rating: "-" },
      { name: "Santanu Nandi", slots: ["L4", "L5"], rating: 2.0 },
      { name: "Piu Kundu", slots: ["L4", "L5"], rating: 4.07 },
      { name: "Pratik Premadarshi Ray", slots: ["L41", "L42"], rating: 3.38 },
      { name: "V. Pujitha", slots: ["L41", "L42"], rating: 3.49 },
      { name: "RAMA KRISHNA RONGALI", slots: ["L41", "L42"], rating: "-" },
      { name: "Arun Kumar Yadav", slots: ["L43", "L44"], rating: 1.97 },
      { name: "Ramesh Prasad Panda", slots: ["L43", "L44"], rating: 2.9 },
      { name: "Shobhit Kumar Srivastava", slots: ["L45", "L46"], rating: 1.74 },
      { name: "ABHILASH CHAND", slots: ["L45", "L46"], rating: "-" },
      { name: "Peeyush Singh", slots: ["L47", "L48"], rating: 4.27 },
      { name: "Nimai Sarkar", slots: ["L47", "L48"], rating: "-" },
      { name: "Soumen Kundu", slots: ["L47", "L48"], rating: 4.86 },
      { name: "S V Gomathi", slots: ["L49", "L50"], rating: "-" },
      { name: "Pradip R. Patle", slots: ["L49", "L50"], rating: 2.2 },
      { name: "Manisha Maity", slots: ["L49", "L50"], rating: 3.86 },
      { name: "Arun Kumar Yadav", slots: ["L51", "L52"], rating: 1.97 },
      { name: "Sudhakar M", slots: ["L51", "L52"], rating: "-" },
      { name: "Prashanth Maroju", slots: ["L53", "L54"], rating: 2.64 },
      { name: "Manisha Maity", slots: ["L53", "L54"], rating: 3.86 },
      { name: "Shalini", slots: ["L55", "L56"], rating: "-" },
      { name: "Davala Ravi Kumar", slots: ["L55", "L56"], rating: 3.52 },
      { name: "Chandan Kumar Thakur", slots: ["L8", "L9"], rating: 2.36 },
      { name: "Gokulnath M", slots: ["L8", "L9"], rating: 2.68 },
    ],
  },
  ECE2002: {
    name: "Computer Architecture and Organization",
    credits: 4,
    theoryTeachers: [
      { name: "Chillu Naresh", slots: ["A1", "TA1", "TAA1"], rating: "-" },
      { name: "G Bharath Reddy", slots: ["A1", "TA1", "TAA1"], rating: 4.52 },
      {
        name: "Girish Kumar Mekala",
        slots: ["A1", "TA1", "TAA1"],
        rating: "-",
      },
      { name: "Moumita Saha", slots: ["A1", "TA1", "TAA1"], rating: "-" },
      { name: "Swati Shukla", slots: ["A1", "TA1", "TAA1"], rating: 3.46 },
      { name: "Debanjali Sarkar", slots: ["A1", "TA1", "TAA1"], rating: 2.49 },
      { name: "M. Krishnasamy", slots: ["A1", "TA1", "TAA1"], rating: 2.85 },
      { name: "Rajeev Sharma", slots: ["A1", "TA1", "TAA1"], rating: 3.27 },
      {
        name: "Sudha Ellison Mathe",
        slots: ["A1", "TA1", "TAA1"],
        rating: 4.21,
      },
      { name: "Chandan Nayak", slots: ["A1", "TA1", "TAA1"], rating: 4.36 },
      { name: "Anamika Lata", slots: ["A1", "TA1", "TAA1"], rating: 4.44 },

      { name: "Chillu Naresh", slots: ["A2", "TA2", "TAA2"], rating: "-" },
      { name: "G Bharath Reddy", slots: ["A2", "TA2", "TAA2"], rating: "-" },
      { name: "Vivek Upadhyaya", slots: ["A2", "TA2", "TAA2"], rating: "-" },
      { name: "Debanjali Sarkar", slots: ["A2", "TA2", "TAA2"], rating: 2.49 },
      { name: "M. Krishnasamy", slots: ["A2", "TA2", "TAA2"], rating: 2.85 },
      { name: "Rajeev Sharma", slots: ["A2", "TA2", "TAA2"], rating: 3.27 },
      {
        name: "Pradosh Ranjan Sahoo",
        slots: ["A2", "TA2", "TAA2"],
        rating: 2.83,
      },
      { name: "Agam Das Goswami", slots: ["A2", "TA2", "TAA2"], rating: 3.67 },
      { name: "Mohit Kumar", slots: ["A2", "TA2", "TAA2"], rating: 3.9 },
      { name: "Chandan Nayak", slots: ["A2", "TA2", "TAA2"], rating: 4.36 },
      { name: "Anamika Lata", slots: ["A2", "TA2", "TAA2"], rating: 4.44 },

      { name: "Chillu Naresh", slots: ["B1", "TB1", "TBB1"], rating: "-" },
      {
        name: "Girish Kumar Mekala",
        slots: ["B1", "TB1", "TBB1"],
        rating: "-",
      },
      { name: "Moumita Saha", slots: ["B1", "TB1", "TBB1"], rating: "-" },
      { name: "Swati Shukla", slots: ["B1", "TB1", "TBB1"], rating: "-" },
      { name: "Debanjali Sarkar", slots: ["B1", "TB1", "TBB1"], rating: 2.49 },
      { name: "M. Krishnasamy", slots: ["B1", "TB1", "TBB1"], rating: 2.85 },
      {
        name: "Pradosh Ranjan Sahoo",
        slots: ["B1", "TB1", "TBB1"],
        rating: 2.83,
      },
      { name: "Agam Das Goswami", slots: ["B1", "TB1", "TBB1"], rating: 3.67 },
      { name: "Mohit Kumar", slots: ["B1", "TB1", "TBB1"], rating: 3.9 },
      {
        name: "Neeraj Kumar Misra",
        slots: ["B1", "TB1", "TBB1"],
        rating: 4.35,
      },

      { name: "G Bharath Reddy", slots: ["B2", "TB2", "TBB2"], rating: "-" },
      {
        name: "Girish Kumar Mekala",
        slots: ["B2", "TB2", "TBB2"],
        rating: "-",
      },
      { name: "Moumita Saha", slots: ["B2", "TB2", "TBB2"], rating: "-" },
      { name: "Vivek Upadhyaya", slots: ["B2", "TB2", "TBB2"], rating: "-" },
      { name: "Rajeev Sharma", slots: ["B2", "TB2", "TBB2"], rating: 3.27 },
      { name: "Agam Das Goswami", slots: ["B2", "TB2", "TBB2"], rating: 3.67 },
      {
        name: "Sudha Ellison Mathe",
        slots: ["B2", "TB2", "TBB2"],
        rating: 4.21,
      },
      { name: "Mohit Kumar", slots: ["B2", "TB2", "TBB2"], rating: 3.9 },
      {
        name: "Neeraj Kumar Misra",
        slots: ["B2", "TB2", "TBB2"],
        rating: 4.35,
      },
      { name: "Chandan Nayak", slots: ["B2", "TB2", "TBB2"], rating: 4.36 },
    ],
  },
  MGT1040: {
    name: "Entrepreneurship - Theory Only",
    credits: 2,
    theoryTeachers: [
      { name: "Dripta De Joarder", slots: ["A1"], rating: 2.44 },
      { name: "Karishma Bisht", slots: ["A1"], rating: 3.99 },
      { name: "Kashif Beg", slots: ["A1"], rating: 2.45 },
      { name: "Umer Mushtaq lone", slots: ["A1"], rating: 0 },
      { name: "Deepjoy Katuwal", slots: ["A2"], rating: 4.82 },
      { name: "Ishfaq Ahmad Thaku", slots: ["A2"], rating: "-" },
      { name: "Rajashree Naik", slots: ["A2"], rating: "-" },
      { name: "Shaiku Shahida Saheb", slots: ["A2"], rating: 4.29 },
      { name: "Aby Abraham", slots: ["C1"], rating: 3.95 },
      { name: "Kashif Beg", slots: ["C1"], rating: 2.45 },
      { name: "N.Prabhakar", slots: ["C1"], rating: "-" },
      { name: "Vadithe Rakesh Naik", slots: ["C1"], rating: "-" },
      { name: "Ameet Chavan", slots: ["C2"], rating: 4.67 },
      { name: "G.Soma Sekhar", slots: ["C2"], rating: 0 },
      { name: "Karishma Bisht", slots: ["C2"], rating: 3.99 },
      { name: "Senthamizhselvi.A", slots: ["C2"], rating: 4.46 },
      { name: "Deepjoy Katuwal", slots: ["G1"], rating: 4.82 },
      { name: "Dripta De Joarder", slots: ["G1"], rating: 2.44 },
      { name: "G.Soma Sekhar", slots: ["G1"], rating: 0 },
      { name: "N.Prabhakar", slots: ["G1"], rating: "-" },
      { name: "Aby Abraham", slots: ["G2"], rating: 3.95 },
      { name: "Rajashree Naik", slots: ["G2"], rating: "-" },
      { name: "Umer Mushtaq lone", slots: ["G2"], rating: 0 },
      { name: "Vadithe Rakesh Naik", slots: ["G2"], rating: "-" },
    ],
  },
  STS2009: {
    name: "Arithmetic Problem Solving Skills",
    credits: 3,
    theoryTeachers: [
      { name: "KALYANI M", slots: ["A1", "TA1"], rating: "-" },
      { name: "MANIKANTA K", slots: ["A1", "TA1"], rating: "-" },
      { name: "SUPRIYA C", slots: ["A1", "TA1"], rating: "-" },
      { name: "Prof.Vijay", slots: ["A1", "TA1"], rating: "-" },
      { name: "Prof Musthaq", slots: ["A2", "TA2"], rating: "-" },
      { name: "Prof. Jesmitha", slots: ["A2", "TA2"], rating: "-" },
      { name: "SUJITHA", slots: ["A2", "TA2"], rating: "-" },
      { name: "Prof.Six Phrase Faculty-6", slots: ["A2", "TA2"], rating: "-" },
      { name: "Mamatha", slots: ["A2", "TA2"], rating: "-" },

      { name: "Prof.Six Phrase Faculty-6", slots: ["B1", "TB1"], rating: "-" },
      { name: "Prof Musthaq", slots: ["B1", "TB1"], rating: "-" },
      { name: "K MANI", slots: ["B1", "TB1"], rating: "-" },
      { name: "KALYANI M", slots: ["B1", "TB1"], rating: "-" },
      { name: "Prof.Six Phrase Faculty-6", slots: ["B2", "TB2"], rating: "-" },
      { name: "SUJITHA", slots: ["B2", "TB2"], rating: "-" },
      { name: "Prof Musthaq", slots: ["B2", "TB2"], rating: "-" },
      { name: "Prof Poojitha L", slots: ["B2", "TB2"], rating: "-" },
      { name: "MANIKANTA K", slots: ["B2", "TB2"], rating: "-" },

      { name: "Prof.Six Phrase Faculty-6", slots: ["C1", "TC1"], rating: "-" },
      { name: "Prof.Vijay", slots: ["C1", "TC1"], rating: "-" },
      { name: "Prof. Jesmitha", slots: ["C1", "TCC1"], rating: "-" },
      { name: "Mamatha", slots: ["C1", "TCC1"], rating: "-" },
      { name: "K MANI", slots: ["C2", "TC2"], rating: "-" },
      { name: "SUPRIYA C", slots: ["C2", "TC2"], rating: "-" },
      { name: "Prof Poojitha L", slots: ["C2", "TCC2"], rating: "-" },
      { name: "Prof.Yamini Durga", slots: ["C2", "TCC2"], rating: "-" },

      { name: "K MANI", slots: ["D1", "TD1"], rating: "-" },
      { name: "SUJITHA", slots: ["D1", "TD1"], rating: "-" },
      { name: "Mamatha", slots: ["D1", "TDD1"], rating: "-" },
      { name: "Prof.Six Phrase Faculty-6", slots: ["D1", "TDD1"], rating: "-" },
      { name: "Prof. Jesmitha", slots: ["D2", "TD2"], rating: "-" },
      { name: "SUPRIYA C", slots: ["D2", "TD2"], rating: "-" },
      { name: "KALYANI M", slots: ["D2", "TDD2"], rating: "-" },
      { name: "Prof.Vijay", slots: ["D2", "TDD2"], rating: "-" },

      { name: "MANIKANTA K", slots: ["E1", "TE1"], rating: "-" },
      { name: "Prof Poojitha L", slots: ["E1", "TE1"], rating: "-" },
      { name: "Mamatha", slots: ["E1", "TE1"], rating: "-" },
      { name: "Prof. Jesmitha", slots: ["E1", "TE1"], rating: "-" },
      { name: "MANIKANTA K", slots: ["E2", "TE2"], rating: "-" },
      { name: "Prof Poojitha L", slots: ["E2", "TE2"], rating: "-" },

      { name: "Prof.Vijay", slots: ["F1", "TF1"], rating: "-" },
      { name: "SUPRIYA C", slots: ["F1", "TF1"], rating: "-" },
      { name: "K MANI", slots: ["F1", "TFF1"], rating: "-" },
      { name: "SUJITHA", slots: ["F1", "TFF1"], rating: "-" },
      { name: "Prof Musthaq", slots: ["F2", "TF2"], rating: "-" },
      { name: "SUPRIYA C", slots: ["F2", "TF2"], rating: "-" },
      { name: "SUJITHA", slots: ["F2", "TF2"], rating: "-" },
      { name: "Prof.Six Phrase Faculty-6", slots: ["F2", "TF2"], rating: "-" },
      { name: "Prof. Jesmitha", slots: ["F2", "TFF2"], rating: "-" },
      { name: "Prof.Vijay", slots: ["F2", "TFF2"], rating: "-" },

      { name: "Prof Musthaq", slots: ["G1", "TG1"], rating: "-" },
      { name: "MANIKANTA K", slots: ["G1", "TG1"], rating: "-" },
      { name: "MANIKANTA K", slots: ["G2", "TG2"], rating: "-" },
      { name: "KALYANI M", slots: ["G2", "TG2"], rating: "-" },
    ],
  },
};

// Sorting functionality
let currentSort = {
  course: null,
  type: null,
  criteria: "rating",
  order: "desc",
};

// Add this function to create sorting controls
function addSortingControls(courseCode, type, container) {
  // Check if sorting controls already exist
  if (
    container.previousElementSibling &&
    container.previousElementSibling.classList.contains("sorting-controls")
  ) {
    return;
  }

  const sortingControls = document.createElement("div");
  sortingControls.className = "sorting-controls";
  sortingControls.innerHTML = `
    <div class="sort-options">
      <span class="sort-label">Sort by:</span>
      <select class="sort-criteria">
        <option value="rating">Rating</option>
        <option value="name">Name</option>
        <option value="slots">Slots</option>
      </select>
      <select class="sort-order">
        <option value="desc">High to Low</option>
        <option value="asc">Low to High</option>
      </select>
      <button class="sort-apply-btn secondary-btn">
        <i class="fas fa-sort"></i> Apply
      </button>
    </div>
  `;

  // Insert sorting controls before the teacher grid
  container.parentNode.insertBefore(sortingControls, container);

  const criteriaSelect = sortingControls.querySelector(".sort-criteria");
  const orderSelect = sortingControls.querySelector(".sort-order");
  const applyBtn = sortingControls.querySelector(".sort-apply-btn");

  // Set current values if this course/type was previously sorted
  if (currentSort.course === courseCode && currentSort.type === type) {
    criteriaSelect.value = currentSort.criteria;
    orderSelect.value = currentSort.order;
  }

  applyBtn.addEventListener("click", () => {
    sortTeachers(courseCode, type, criteriaSelect.value, orderSelect.value);
  });
}

// Add this function to sort teachers
function sortTeachers(courseCode, type, criteria, order) {
  currentSort = { course: courseCode, type, criteria, order };

  const container = document.getElementById(`${type}-${courseCode}`);
  if (!container) return;

  const teacherCards = Array.from(container.querySelectorAll(".teacher-card"));
  const noPreferenceCard = teacherCards.find((card) =>
    card.querySelector('input[value=""]')
  );
  const otherCards = teacherCards.filter(
    (card) => !card.querySelector('input[value=""]')
  );

  otherCards.sort((a, b) => {
    const teacherA = getTeacherData(a, courseCode, type);
    const teacherB = getTeacherData(b, courseCode, type);

    let valueA, valueB;

    switch (criteria) {
      case "rating":
        valueA = parseRating(teacherA.rating);
        valueB = parseRating(teacherB.rating);
        break;
      case "name":
        valueA = teacherA.name.toLowerCase();
        valueB = teacherB.name.toLowerCase();
        break;
      case "slots":
        // Sort by slot codes alphabetically
        valueA = teacherA.slots.join(", ").toLowerCase();
        valueB = teacherB.slots.join(", ").toLowerCase();
        break;
      default:
        return 0;
    }

    if (order === "asc") {
      return valueA < valueB ? -1 : valueA > valueB ? 1 : 0;
    } else {
      return valueA > valueB ? -1 : valueA < valueB ? 1 : 0;
    }
  });

  // Clear container and re-add cards in sorted order
  container.innerHTML = "";
  if (noPreferenceCard) {
    container.appendChild(noPreferenceCard);
  }
  otherCards.forEach((card) => container.appendChild(card));

  // Update visual feedback
  updateSortVisualFeedback(courseCode, type, criteria, order);
}

// Helper function to get teacher data from card
function getTeacherData(card, courseCode, type) {
  const input = card.querySelector("input");
  const teacherName = input.value;
  const slots = input.dataset.slots
    ? input.dataset.slots.split(",").map((s) => s.trim())
    : [];

  const course = courseData[courseCode];
  const teacherList =
    type === "theory" ? course.theoryTeachers : course.labTeachers;
  const teacher = teacherList.find((t) => t.name === teacherName);

  return teacher || { name: teacherName, slots, rating: "-" };
}

// Helper function to parse rating
function parseRating(rating) {
  if (rating === "-" || rating === "" || rating === undefined) return -1;
  const num = parseFloat(rating);
  return isNaN(num) ? -1 : num;
}

// Update visual feedback for sorting
function updateSortVisualFeedback(courseCode, type, criteria, order) {
  const container = document.getElementById(`${type}-${courseCode}`);
  if (!container) return;

  // Remove existing indicators
  const sortingControls = container.previousElementSibling;
  if (
    sortingControls &&
    sortingControls.classList.contains("sorting-controls")
  ) {
    sortingControls
      .querySelectorAll(".sort-indicator")
      .forEach((ind) => ind.remove());

    const indicator = document.createElement("span");
    indicator.className = "sort-indicator";
    indicator.innerHTML = `<i class="fas fa-sort-${
      order === "asc" ? "up" : "down"
    }"></i> ${criteria}`;
    indicator.style.marginLeft = "10px";
    indicator.style.fontSize = "0.8rem";
    indicator.style.color = "var(--primary-green)";

    sortingControls.querySelector(".sort-options").appendChild(indicator);
  }
}

// DOM Elements
const courseSelect = document.getElementById("course-type");
const confirmBtn = document.getElementById("confirm-courses");
const backBtn = document.getElementById("back-to-courses");
const saveBtn = document.getElementById("save-selection");
const loadBtn = document.getElementById("load-selection");
const teacherSection = document.getElementById("teacher-selection");
const teacherContainer = document.getElementById("teacher-options-container");
const generateBtn = document.getElementById("generate-timetable");
const resetBtn = document.getElementById("reset-selection");
const timetableDisplay = document.getElementById("timetable-display");
const timetableGrid = document.getElementById("timetable-grid");
const exportPdfBtn = document.getElementById("export-pdf");
const exportImageBtn = document.getElementById("export-image");
const conflictWarnings = document.getElementById("conflict-warnings");

const selections = {
  courses: [],
  teachers: {},
  version: "2.0.0",
};

// âœ… Initialize timetable grid
function initializeTimetable() {
  timetableGrid.innerHTML = "";

  const days = ["TUE", "WED", "THU", "FRI", "SAT"];

  // First row: Header
  const timeHeader = document.createElement("div");
  timeHeader.className = "timetable-cell day-header";
  timeHeader.textContent = "Time";
  timetableGrid.appendChild(timeHeader);

  days.forEach((day) => {
    const dayHeader = document.createElement("div");
    dayHeader.className = "timetable-cell day-header";
    dayHeader.textContent = day;
    timetableGrid.appendChild(dayHeader);
  });

  // Time rows
  // Track separate index for theory slot rows
  const theoryIndices = {
    TUE: 0,
    WED: 0,
    THU: 0,
    FRI: 0,
    SAT: 0,
  };

  unifiedTimes.forEach((timeObj, timeIndex) => {
    // Time column
    const timeCell = document.createElement("div");
    timeCell.className = "timetable-cell time-header";
    timeCell.textContent = timeObj.time;
    if (timeObj.labOnly) timeCell.classList.add("lab-only-time");
    timetableGrid.appendChild(timeCell);

    // For each day
    days.forEach((day) => {
      const cell = document.createElement("div");
      cell.className = "timetable-cell";

      let theorySlots = [];
      if (!timeObj.labOnly) {
        // Only use theory slot if it's a theory-compatible time
        theorySlots =
          slotStructure[day]?.theorySlots?.[theoryIndices[day]] || [];
        theoryIndices[day]++; // only increment if we actually used it
      }

      const labSlots = slotStructure[day]?.labSlots?.[timeIndex] || [];

      const allSlots = [...theorySlots, ...labSlots].flat();

      if (allSlots.length > 0) {
        const label = document.createElement("div");
        label.className = "slot-code-label";
        label.textContent = allSlots.join(" / ");
        cell.appendChild(label);
      }

      timetableGrid.appendChild(cell);
    });
  });
}

function sameSlots(a, b) {
  if (!a || !b) return false;
  return (
    a.length === b.length && a.every((val, i) => val.trim() === b[i].trim())
  );
}

// âœ… Show teacher options for each course (UPDATED WITH SORTING)
function showTeacherOptions() {
  const selectedOptions = Array.from(courseSelect.selectedOptions);

  // Preserve old selections and just add new ones
  selectedOptions.forEach((opt) => {
    const courseCode = opt.value.split(" - ")[0];
    if (!selections.courses.includes(courseCode)) {
      selections.courses.push(courseCode);
    }
  });

  if (selections.courses.length === 0) {
    alert("Please select at least one course.");
    return;
  }

  teacherContainer.innerHTML = "";

  const currentSelection = selectedOptions.map(
    (opt) => opt.value.split(" - ")[0]
  );

  currentSelection.forEach((courseCode) => {
    const course = courseData[courseCode];
    if (!course) return;

    const courseDiv = document.createElement("div");
    courseDiv.className = "course-section card";
    courseDiv.innerHTML = `
      <h3>${courseCode}: ${course.name} (${course.credits} Credits)</h3>
      <div class="teacher-section">
        <div class="teacher-type-label">Theory Teachers</div>
        <!-- Sorting controls will be inserted here by JavaScript -->
        <div class="teachers-grid" id="theory-${courseCode}"></div>
      </div>
      <div class="teacher-section">
        <div class="teacher-type-label">Lab Teachers</div>
        <!-- Sorting controls will be inserted here by JavaScript -->
        <div class="teachers-grid" id="lab-${courseCode}"></div>
      </div>
    `;
    teacherContainer.appendChild(courseDiv);

    const theoryContainer = document.getElementById(`theory-${courseCode}`);
    const labContainer = document.getElementById(`lab-${courseCode}`);

    // Add sorting controls
    if (course.theoryTeachers?.length) {
      addSortingControls(courseCode, "theory", theoryContainer);
    }
    if (course.labTeachers?.length) {
      addSortingControls(courseCode, "lab", labContainer);
    }

    // Helper to render teachers for theory/lab
    function renderTeacherOptions(container, type, teacherList) {
      const groupName = `${courseCode}-${type}`;
      const selected = selections.teachers[courseCode]?.[type];

      // No Preference option
      const noPrefId = `${groupName}-no-preference`;
      const noPrefSelected = !selected;
      const noPrefDiv = document.createElement("div");
      noPrefDiv.className = "teacher-card";
      noPrefDiv.innerHTML = `
    <input type="radio" name="${groupName}" id="${noPrefId}" value="" hidden ${
        noPrefSelected ? "checked" : ""
      }>
    <label class="card-ui ${
      noPrefSelected ? "selected" : ""
    }" for="${noPrefId}">
      <div class="teacher-name">No Preference</div>
      <div class="teacher-meta"><span class="rating">System will choose</span><span class="slots">Any slot</span></div>
    </label>
  `;
      container.appendChild(noPrefDiv);

      document.getElementById(noPrefId).addEventListener("change", () => {
        if (!selections.teachers[courseCode])
          selections.teachers[courseCode] = {};
        delete selections.teachers[courseCode][type];

        document
          .querySelectorAll(`input[name="${groupName}"]`)
          .forEach((input) => {
            input.nextElementSibling.classList.toggle(
              "selected",
              input.checked
            );
          });
      });

      // Real teachers - apply initial sorting if exists
      let teachersToRender = [...teacherList];
      if (currentSort.course === courseCode && currentSort.type === type) {
        teachersToRender.sort((a, b) => {
          let valueA, valueB;

          switch (currentSort.criteria) {
            case "rating":
              valueA = parseRating(a.rating);
              valueB = parseRating(b.rating);
              break;
            case "name":
              valueA = a.name.toLowerCase();
              valueB = b.name.toLowerCase();
              break;
            case "slots":
              // FIXED: Use the same logic as sortTeachers - sort by slot codes alphabetically
              valueA = a.slots.join(", ").toLowerCase();
              valueB = b.slots.join(", ").toLowerCase();
              break;
            default:
              return 0;
          }

          if (currentSort.order === "asc") {
            return valueA < valueB ? -1 : valueA > valueB ? 1 : 0;
          } else {
            return valueA > valueB ? -1 : valueA < valueB ? 1 : 0;
          }
        });
      }

      teachersToRender.forEach((teacher) => {
        const key = `${groupName}-${teacher.name.replace(
          /\s+/g,
          "-"
        )}-${Math.random().toString(36).substr(2, 4)}`;
        const isSelected =
          selected?.name === teacher.name &&
          sameSlots(selected?.slots, teacher.slots);

        const div = document.createElement("div");
        div.className = "teacher-card";
        div.innerHTML = `
      <input type="radio" name="${groupName}" id="${key}" value="${
          teacher.name
        }" data-slots="${teacher.slots.join(",")}" hidden ${
          isSelected ? "checked" : ""
        }>
      <label class="card-ui ${isSelected ? "selected" : ""}" for="${key}">
        <div class="teacher-name">${teacher.name}</div>
        <div class="teacher-meta">
          <span class="rating">${
            teacher.rating ? "â­ " + teacher.rating : "No rating"
          }</span>
          <span class="slots">${teacher.slots.join(", ")}</span>
        </div>
      </label>
    `;
        container.appendChild(div);

        document.getElementById(key).addEventListener("change", (e) => {
          if (!selections.teachers[courseCode])
            selections.teachers[courseCode] = {};
          selections.teachers[courseCode][type] = {
            name: e.target.value,
            slots: e.target.dataset.slots.split(",").map((s) => s.trim()),
          };

          document
            .querySelectorAll(`input[name="${groupName}"]`)
            .forEach((input) => {
              input.nextElementSibling.classList.toggle(
                "selected",
                input.checked
              );
            });
        });
      });
    }

    // Render both theory and lab teacher lists
    if (course.theoryTeachers?.length) {
      renderTeacherOptions(theoryContainer, "theory", course.theoryTeachers);
    }
    if (course.labTeachers?.length) {
      renderTeacherOptions(labContainer, "lab", course.labTeachers);
    }
  });

  teacherSection.classList.remove("hidden");
}

function populateSelectedTeachersTable() {
  const tbody = document.getElementById("selected-teachers-tbody");
  const totalCreditsDisplay = document.getElementById("total-credits-display");

  tbody.innerHTML = "";

  if (selections.courses.length === 0) {
    const emptyRow = document.createElement("tr");
    emptyRow.innerHTML = `
      <td colspan="7" class="empty-selection">
        <i class="fas fa-users"></i>
        <div>No courses selected</div>
      </td>
    `;
    tbody.appendChild(emptyRow);
    totalCreditsDisplay.textContent = "0";
    return;
  }

  let totalCredits = 0;

  selections.courses.forEach((courseCode) => {
    const course = courseData[courseCode];
    const selected = selections.teachers[courseCode];

    if (!course) return;

    const row = document.createElement("tr");

    const theoryTeacher = selected?.theory;
    const labTeacher = selected?.lab;

    row.innerHTML = `
      <td>${courseCode}</td>
      <td>${course.name}</td>
      <td>${theoryTeacher ? theoryTeacher.name : "Not selected"}</td>
      <td>${theoryTeacher ? theoryTeacher.slots.join(", ") : "-"}</td>
      <td>${labTeacher ? labTeacher.name : "Not selected"}</td>
      <td>${labTeacher ? labTeacher.slots.join(", ") : "-"}</td>
      <td>${course.credits}</td>
    `;

    tbody.appendChild(row);
    totalCredits += course.credits || 0;
  });

  totalCreditsDisplay.textContent = totalCredits.toString();
}

// âœ… Generate Timetable based on selected teachers and slots
function generateTimetable() {
  // First, populate the teachers table
  populateSelectedTeachersTable();

  // Then continue with the existing timetable generation logic
  document.querySelectorAll(".course-slot").forEach((el) => el.remove());
  conflictWarnings.innerHTML = "";

  // ... rest of your existing generateTimetable function remains exactly the same ...
  const conflicts = new Set();
  const timeMap = {};
  const labOnlyTimes = unifiedTimes
    .map((u, i) => (u.labOnly ? i : -1))
    .filter((i) => i !== -1);

  // Map: theory index <-> unifiedTimes index
  const theoryToUnifiedIndex = {};
  const unifiedToTheoryIndex = {};
  let theoryRow = 0;
  unifiedTimes.forEach((u, i) => {
    if (!u.labOnly) {
      theoryToUnifiedIndex[theoryRow] = i;
      unifiedToTheoryIndex[i] = theoryRow;
      theoryRow++;
    }
  });

  // Auto-select teachers if not chosen
  selections.courses.forEach((courseCode) => {
    const selected = selections.teachers[courseCode] || {};
    const course = courseData[courseCode];

    ["theory", "lab"].forEach((type) => {
      if (selected[type]) return;

      const candidates =
        (type === "theory" ? course.theoryTeachers : course.labTeachers) || [];
      let bestChoice = null;

      for (const teacher of candidates) {
        let valid = true;

        for (const slotCode of teacher.slots) {
          for (const day of ["TUE", "WED", "THU", "FRI", "SAT"]) {
            const theory = slotStructure[day]?.theorySlots || [];
            const lab = slotStructure[day]?.labSlots || [];

            for (let i = 0; i < unifiedTimes.length; i++) {
              const tIndex = unifiedToTheoryIndex[i];
              const theoryGroup =
                tIndex !== undefined ? theory[tIndex] || [] : [];
              const labGroup = lab[i] || [];

              const slots = [...theoryGroup, ...labGroup].flatMap((s) =>
                s.split(",").map((x) => x.trim())
              );

              if (slots.includes(slotCode)) {
                if (type === "theory" && unifiedTimes[i].labOnly) {
                  valid = false;
                  break;
                }
                const key = `${day}|${i}`;
                if (timeMap[key]?.some((x) => x.slotCode === slotCode)) {
                  valid = false;
                  break;
                }
              }
            }
            if (!valid) break;
          }
          if (!valid) break;
        }

        if (valid) {
          bestChoice = teacher;
          break;
        }
      }

      if (bestChoice) {
        if (!selections.teachers[courseCode])
          selections.teachers[courseCode] = {};
        selections.teachers[courseCode][type] = {
          name: bestChoice.name,
          slots: [...bestChoice.slots],
        };
      }
    });
  });

  // Refresh the teachers table with auto-selected teachers
  populateSelectedTeachersTable();

  // Place teacher slots into the timetable
  selections.courses.forEach((courseCode) => {
    const selected = selections.teachers[courseCode];
    if (!selected) return;

    ["theory", "lab"].forEach((type) => {
      const teacher = selected[type];
      if (!teacher?.slots) return;

      teacher.slots.forEach((slotCode) => {
        for (const day of ["TUE", "WED", "THU", "FRI", "SAT"]) {
          const dayIndex = ["TUE", "WED", "THU", "FRI", "SAT"].indexOf(day);
          const theory = slotStructure[day]?.theorySlots || [];
          const lab = slotStructure[day]?.labSlots || [];

          for (let i = 0; i < unifiedTimes.length; i++) {
            const tIndex = unifiedToTheoryIndex[i];
            const theoryGroup =
              tIndex !== undefined ? theory[tIndex] || [] : [];
            const labGroup = lab[i] || [];

            const slots = [...theoryGroup, ...labGroup].flatMap((s) =>
              s.split(",").map((x) => x.trim())
            );
            if (!slots.includes(slotCode)) continue;

            if (type === "theory" && unifiedTimes[i].labOnly) {
              const warning = document.createElement("div");
              warning.className = "conflict-warning";
              warning.innerHTML = `<i class="fas fa-exclamation-triangle"></i> Cannot place theory slot for ${courseCode} in lab-only time ${unifiedTimes[i].time}`;
              conflictWarnings.appendChild(warning);
              continue;
            }

            const timeKey = `${day}|${i}`;
            if (!timeMap[timeKey]) timeMap[timeKey] = [];
            timeMap[timeKey].push({
              slotCode,
              courseCode,
              teacherName: teacher.name,
              isLab: type === "lab",
            });

            if (timeMap[timeKey].length > 1) {
              conflicts.add(timeKey);
            }

            const row = i + 1;
            const col = dayIndex + 1;
            const cellIndex = row * 6 + col;

            const cell = timetableGrid.children[cellIndex];
            const div = document.createElement("div");
            div.className = `course-slot ${
              type === "lab" ? "lab-slot" : "theory-slot"
            }`;
            div.textContent = courseCode;
            div.title = `${courseData[courseCode].name}\nTeacher: ${teacher.name}`;
            if (timeMap[timeKey].length > 1) div.classList.add("conflict-slot");
            cell.appendChild(div);
          }
        }
      });
    });
  });

  // Display conflict warnings
  if (conflicts.size > 0) {
    conflicts.forEach((key) => {
      const [day, index] = key.split("|");
      const overlapping = timeMap[key].map((x) => x.courseCode);
      const warning = document.createElement("div");
      warning.className = "conflict-warning";
      warning.innerHTML = `<i class="fas fa-exclamation-triangle"></i> Time Conflict on ${day} ${
        unifiedTimes[index].time
      }: ${[...new Set(overlapping)].join(", ")}`;
      conflictWarnings.appendChild(warning);
    });
  } else {
    const msg = document.createElement("div");
    msg.className = "conflict-warning";
    msg.textContent = "No conflicts detected in your timetable!";
    conflictWarnings.appendChild(msg);
  }

  timetableDisplay.classList.remove("hidden");
}

// âœ… Save/load selection
function saveSelection() {
  try {
    localStorage.setItem("timetableSelection", JSON.stringify(selections));
    alert("Selection saved!");
  } catch (e) {
    alert("Save failed: " + e.message);
  }
}

function loadSelection() {
  try {
    const saved = JSON.parse(localStorage.getItem("timetableSelection"));
    if (!saved?.courses || !saved?.teachers) throw new Error("Invalid format");
    if (
      saved.version !== selections.version &&
      !confirm("Version mismatch. Load anyway?")
    )
      return;

    selections.courses = saved.courses;
    selections.teachers = saved.teachers;

    Array.from(courseSelect.options).forEach((opt) => {
      opt.selected = selections.courses.includes(opt.value.split(" - ")[0]);
    });

    showTeacherOptions();
    alert("Selection loaded!");
  } catch (e) {
    alert("Load failed: " + e.message);
  }
}

// âœ… Export timetable
async function exportAsPDF() {
  try {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({ orientation: "landscape", unit: "mm" });

    // Add teachers table first
    doc.setFontSize(16);
    doc.text("Selected Teachers", 20, 15);

    // Get teachers table data
    let teachersContent = [];
    let totalCredits = 0;

    selections.courses.forEach((courseCode) => {
      const course = courseData[courseCode];
      const selected = selections.teachers[courseCode];
      if (!course) return;

      const theoryTeacher = selected?.theory;
      const labTeacher = selected?.lab;

      teachersContent.push({
        courseCode,
        courseName: course.name,
        theoryTeacher: theoryTeacher ? theoryTeacher.name : "Not selected",
        theorySlots: theoryTeacher ? theoryTeacher.slots.join(", ") : "-",
        labTeacher: labTeacher ? labTeacher.name : "Not selected",
        labSlots: labTeacher ? labTeacher.slots.join(", ") : "-",
        credits: course.credits,
      });

      totalCredits += course.credits || 0;
    });

    // Add teachers table content
    let yPosition = 25;
    doc.setFontSize(10);

    teachersContent.forEach((item) => {
      if (yPosition > 250) {
        doc.addPage();
        yPosition = 20;
      }

      doc.text(`${item.courseCode} - ${item.courseName}`, 20, yPosition);
      yPosition += 5;
      doc.text(
        `Theory: ${item.theoryTeacher} (${item.theorySlots})`,
        25,
        yPosition
      );
      yPosition += 5;
      doc.text(`Lab: ${item.labTeacher} (${item.labSlots})`, 25, yPosition);
      yPosition += 5;
      doc.text(`Credits: ${item.credits}`, 25, yPosition);
      yPosition += 8;
    });

    // Add total credits
    doc.text(`Total Credits: ${totalCredits}`, 20, yPosition);
    yPosition += 15;

    // Add timetable
    if (yPosition > 180) {
      doc.addPage();
      yPosition = 20;
    }

    doc.setFontSize(16);
    doc.text("Timetable", 20, yPosition);
    yPosition += 10;

    const timetableElement = document.querySelector(".timetable-container");
    const canvas = await html2canvas(timetableElement, { scale: 1.5 });
    const imgData = canvas.toDataURL("image/png");
    const imgWidth = 270;
    const imgHeight = (canvas.height * imgWidth) / canvas.width;

    doc.addImage(imgData, "PNG", 10, yPosition, imgWidth, imgHeight);
    doc.save("timetable-with-teachers.pdf");
  } catch (e) {
    alert("Export failed: " + e.message);
  }
}

async function exportAsImage() {
  try {
    // Create a container to capture both teachers table and timetable
    const exportContainer = document.createElement("div");
    exportContainer.style.cssText = `
      position: fixed;
      left: -10000px;
      top: -10000px;
      width: 1200px;
      background: white;
      padding: 20px;
      z-index: 10000;
    `;

    // Clone the teachers table
    const teachersTable = document
      .getElementById("selected-teachers-table")
      .cloneNode(true);
    teachersTable.style.marginBottom = "30px";
    exportContainer.appendChild(teachersTable);

    // Clone the timetable
    const timetable = document
      .querySelector(".timetable-container")
      .cloneNode(true);
    exportContainer.appendChild(timetable);

    document.body.appendChild(exportContainer);

    const canvas = await html2canvas(exportContainer, { scale: 2 });
    const link = document.createElement("a");
    link.download = "timetable-with-teachers.png";
    link.href = canvas.toDataURL("image/png");
    link.click();

    document.body.removeChild(exportContainer);
  } catch (e) {
    alert("Image export failed: " + e.message);
  }
}

// âœ… Reset selections
function resetSelections() {
  courseSelect.selectedIndex = -1;
  teacherContainer.innerHTML = "";
  selections.courses = [];
  selections.teachers = {};
  teacherSection.classList.add("hidden");
  timetableDisplay.classList.add("hidden");
  document.querySelectorAll(".course-slot").forEach((el) => el.remove());
  conflictWarnings.innerHTML = "";
}

// âœ… Event listeners
document.addEventListener("DOMContentLoaded", () => {
  initializeTimetable();

  confirmBtn.addEventListener("click", showTeacherOptions);
  backBtn.addEventListener("click", () =>
    teacherSection.classList.add("hidden")
  );
  generateBtn.addEventListener("click", generateTimetable);
  resetBtn.addEventListener("click", resetSelections);
  saveBtn.addEventListener("click", saveSelection);
  loadBtn.addEventListener("click", loadSelection);
  exportPdfBtn.addEventListener("click", exportAsPDF);
  exportImageBtn.addEventListener("click", exportAsImage);
});